# Haaju Project Deployment Guide

This guide covers deploying the Haaju project management platform to Render.

## üöÄ Quick Deploy to Render

### Option 1: Blueprint Deploy (Recommended)

1. **Fork or clone this repository**
2. **Go to [Render Dashboard](https://dashboard.render.com/)**
3. **Click "New +" ‚Üí "Blueprint"**
4. **Connect your GitHub repository**
5. **Select this repository and the `master` branch**
6. **Render will automatically detect the `render.yaml` file**
7. **Click "Apply" to deploy all services**

### Option 2: Manual Deploy

#### Backend Service
1. Create a new **Web Service** in Render
2. Connect your GitHub repository
3. Configure:
   - **Build Command**: `cd haaju_backend && chmod +x build.sh && ./build.sh`
   - **Start Command**: `cd haaju_backend && gunicorn config.wsgi:application --bind 0.0.0.0:$PORT`
   - **Environment**: Python 3
   - **Environment Variables**:
     - `DJANGO_SETTINGS_MODULE`: `config.settings.render`
     - `SECRET_KEY`: Generate a secure secret key
     - `DEBUG`: `False`

#### Frontend Service
1. Create a new **Web Service** in Render
2. Connect your GitHub repository
3. Configure:
   - **Build Command**: `cd haaju_frontend && chmod +x build.sh && ./build.sh`
   - **Start Command**: `cd haaju_frontend && npm start`
   - **Environment**: Node.js
   - **Environment Variables**:
     - `NODE_ENV`: `production`
     - `NEXT_PUBLIC_API_URL`: Your backend service URL

#### Database
1. Create a new **PostgreSQL** database
2. Note the connection details for backend configuration

#### Redis (Optional)
1. Create a new **Redis** instance for Celery tasks
2. Note the connection URL for backend configuration

## üîß Environment Variables

### Backend Required Variables
- `DJANGO_SETTINGS_MODULE`: `config.settings.render`
- `SECRET_KEY`: Django secret key (auto-generated by Render)
- `DEBUG`: `False`
- `DB_NAME`: Database name
- `DB_USER`: Database user
- `DB_PASSWORD`: Database password
- `DB_HOST`: Database host
- `DB_PORT`: Database port
- `REDIS_URL`: Redis connection URL (if using Celery)

### Frontend Required Variables
- `NODE_ENV`: `production`
- `NEXT_PUBLIC_API_URL`: Backend service URL

## üìù Post-Deployment Steps

1. **Create a superuser**:
   ```bash
   # Access your backend service shell in Render
   python manage.py createsuperuser
   ```

2. **Verify deployment**:
   - Backend: Visit your backend URL + `/admin/`
   - Frontend: Visit your frontend URL
   - API: Test endpoints at your backend URL + `/api/`

## üîç Troubleshooting

### Common Issues

1. **Build Failures**:
   - Check build logs in Render dashboard
   - Ensure all dependencies are in requirements files
   - Verify build scripts have execute permissions

2. **Database Connection Issues**:
   - Verify database credentials in environment variables
   - Check if database service is running
   - Ensure migrations are applied

3. **Static Files Issues**:
   - Check if `collectstatic` ran successfully
   - Verify static files configuration

4. **Frontend API Connection**:
   - Ensure `NEXT_PUBLIC_API_URL` points to correct backend URL
   - Check CORS settings in Django

### Logs
- View logs in Render dashboard under each service
- Backend logs: Django and Gunicorn logs
- Frontend logs: Next.js build and runtime logs

## üîÑ Updates and Redeployment

Render automatically redeploys when you push to the connected branch. To manually redeploy:

1. Go to your service in Render dashboard
2. Click "Manual Deploy"
3. Select the branch/commit to deploy

## üìä Monitoring

- Use Render's built-in monitoring
- Check service health in dashboard
- Monitor resource usage and performance

## üîí Security Considerations

- Keep `DEBUG=False` in production
- Use strong secret keys
- Configure proper CORS settings
- Set up proper database backups
- Use HTTPS (enabled by default on Render)

## üìû Support

- Render Documentation: https://render.com/docs
- Django Deployment: https://docs.djangoproject.com/en/stable/howto/deployment/
- Next.js Deployment: https://nextjs.org/docs/deployment
